<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>星期八</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Linux 设计模式 Java">
<meta property="og:type" content="website">
<meta property="og:title" content="星期八">
<meta property="og:url" content="https://www.nierunjie.site/page/42/index.html">
<meta property="og:site_name" content="星期八">
<meta property="og:description" content="Linux 设计模式 Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="星期八">
<meta name="twitter:description" content="Linux 设计模式 Java">
  
    <link rel="alternate" href="/atom.xml" title="星期八" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">星期八</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">祝世界和平</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://www.nierunjie.site"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JDBC浅析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/25/JDBC浅析/" class="article-date">
  <time datetime="2017-04-25T00:54:03.000Z" itemprop="datePublished">2017-04-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/25/JDBC浅析/">JDBC浅析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="JDBC介绍"><a href="#JDBC介绍" class="headerlink" title="JDBC介绍"></a>JDBC介绍</h2><ul>
<li><a href="http://baike.baidu.com/link?url=dJRfeHbxsfQoipAv8M7_pRpk88uBnCMWREdGXMI4hYpSmMekcSsVBrtfhHZYIBnYejVeyWY8U8pg-W9RfweYI_" target="_blank" rel="external">百度百科关于JDBC的介绍</a></li>
<li>介绍JDBC常用的接口和类及其方法</li>
</ul>
<h2 id="JDBC常用接口和类"><a href="#JDBC常用接口和类" class="headerlink" title="JDBC常用接口和类"></a>JDBC常用接口和类</h2><h3 id="interface-Driver"><a href="#interface-Driver" class="headerlink" title="interface Driver"></a>interface Driver</h3><ul>
<li>The interface that every driver class must implement.</li>
<li>这是每个驱动类都必须实现的接口</li>
<li>以SQLlite为例,<code>public class org.sqlite.JDBC implements java.sql.Driver</code>实现该接口</li>
<li><code>Class.forName(&quot;org.sqlite.JDBC&quot;)</code><br>is equivalent to:<br><code>Class.forName(&quot;org.sqlite.JDBC&quot;, true, this.getClass().getClassLoader())</code></li>
<li><p><code>Class.forName(name,initialize,loader)</code><br>name - fully qualified name of the desired class<br>initialize - if true the class will be initialized.<br>loader - class loader from which the class must be loaded</p>
</li>
<li><p>例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Class.forName(<span class="string">"org.sqlite.JDBC"</span>); <span class="comment">// 将驱动加载到内存</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="interface-Connection"><a href="#interface-Connection" class="headerlink" title="interface Connection"></a>interface Connection</h3><ul>
<li>A connection (session) with a specific database.</li>
<li><code>Statement createStatement() throws SQLException</code>Creates a Statement object for sending SQL statements to the database. SQL statements without parameters are normally executed using Statement objects. If the same SQL statement is executed many times, it may be more efficient to use a PreparedStatement object.</li>
<li><code>PreparedStatement prepareStatement(String sql)throws SQLException</code>Creates a PreparedStatement object for sending parameterized SQL statements to the database</li>
<li><p>注意:无参数的SQL使用<code>createStatement()</code>方法创建Statement对象;有参数的使用<code>prepareStatement()</code>创建PreparedStatement对象,防止SQL注入</p>
</li>
<li><p>例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Connection c = <span class="keyword">null</span>; <span class="comment">//创建空的Connection对象</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Class-DriverManager"><a href="#Class-DriverManager" class="headerlink" title="Class DriverManager"></a>Class DriverManager</h3><ul>
<li>该类重载3个getConnection方法得到Connection</li>
</ul>
<ol>
<li><code>getConnection(String url)</code><br> SQLite使用此方法,传入数据库文件的地址,返回Connection</li>
<li><code>getConnection(String url, Properties info)</code><br> info为参数列表,正常情况下至少包含帐号密码</li>
<li><code>getConnection(String url, String user, String password)</code><br> MySQL连接时可在url中指明字符集<code>useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</code></li>
</ol>
<ul>
<li><p>例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">c = DriverManager.getConnection(<span class="string">"jdbc:sqlite:"</span> + file.db); <span class="comment">// 连接数据库</span></div></pre></td></tr></table></figure>
<p>注:file.db为SQLite数据库文件路径</p>
</li>
</ul>
<h3 id="interface-Statement"><a href="#interface-Statement" class="headerlink" title="interface Statement"></a>interface Statement</h3><ul>
<li>The object used for executing a static SQL statement and returning the results it produces.</li>
<li><code>ResultSet executeQuery(String sql)throws SQLException</code> 使用静态SQL语句返回ResultSet对象</li>
<li><code>int executeUpdate(String sql)throws SQLException</code> INSERT, UPDATE, or DELETE等不返回ResultSet的SQL语句使用此方法,返回值为DML的行数(不懂)或者返回0</li>
<li>注意:传入的SQL语句直接传给数据库,如果组成sql的字符串有输入的部分,存在SQL注入的危险,建议使用PreparedStatement</li>
<li>例:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Statement stmt = c.createStatement(); <span class="comment">// 通过Connection对象创建Statement对象</span></div><div class="line">String sql = <span class="string">"CREATE TABLE USER(ID INT PRIMARY KEY NOT NULL,USERNAME TEXT NOT NULL ,PASSWORD INT NOT NULL)"</span>;</div><div class="line">stmt.executeUpdate(sql); <span class="comment">// 通过Statment执行SQL语句,有注入危险</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="interface-PreparedStatement-extends-tatement"><a href="#interface-PreparedStatement-extends-tatement" class="headerlink" title="interface PreparedStatement extends tatement"></a>interface PreparedStatement extends tatement</h3><ul>
<li>An object that represents a precompiled SQL statement.</li>
<li>继承自Statement,预编译SQL语句的部分,传入SQL语句中的参数,因为SQL语句部分已经编译,可以解决由Statement带来的SQL注入风险,<br>因为SQL语句部分已经被编译,所以有更高的执行效率,多次提交的SQL语句建议用此类的对象</li>
<li><p>例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">PreparedStatement pstmt = con.prepareStatement(<span class="string">"UPDATE EMPLOYEES SET SALARY = ? WHERE ID = ?"</span>); <span class="comment">// 创建PreparedStatement对象</span></div><div class="line">pstmt.setBigDecimal(<span class="number">1</span>, <span class="number">153833.00</span>); <span class="comment">// 插入参数</span></div><div class="line">pstmt.setInt(<span class="number">2</span>, <span class="number">110592</span>);</div><div class="line">ResultSet rs = pstmt.executeQuery(); <span class="comment">//执行语句,并返回ResultSet对象</span></div></pre></td></tr></table></figure>
<p>使用setXXX方法设置参数,如上所示<br>常用set方法<br><code>setString(int parameterIndex, String x)</code><br><code>setTime(int parameterIndex, Time x)</code><br><code>setInt(int parameterIndex, int x)</code></p>
</li>
</ul>
<h3 id="interface-ResultSet"><a href="#interface-ResultSet" class="headerlink" title="interface ResultSet"></a>interface ResultSet</h3><ul>
<li>A table of data representing a database result set, which is usually generated by executing a statement that queries the database.</li>
<li><code>boolean next()</code>Moves the cursor forward one row from its current position.</li>
<li><code>getString(String columnLabel)</code>以字符串形式返回游标(cursor)所在行,属性为columnLable的数据元素的值</li>
<li>例:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rs.next(); <span class="comment">// 游标在数据的前一行,要得到第一行数据需要移动一次游标</span></div><div class="line">String cnt = rs.getString(<span class="number">1</span>); <span class="comment">// 得到第一列的数据元素</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>操作完成后断开所有连接释放资源<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rs.close();</div><div class="line">pstmt.close(); <span class="comment">// stmt.close()</span></div><div class="line">c.close();</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.nierunjie.site/2017/04/25/JDBC浅析/" data-id="cj3go9t0g000vs44diyfn4cgg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/41/">&laquo;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/">40</a><a class="page-number" href="/page/41/">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/">43</a><a class="page-number" href="/page/44/">44</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><a class="extend next" rel="next" href="/page/43/">&raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/02/Mediator-Pattern/">Mediator Pattern</a>
          </li>
        
          <li>
            <a href="/2017/06/02/Command-Pattern/">Command Pattern</a>
          </li>
        
          <li>
            <a href="/2017/06/01/Visitor-Pattern/">Visitor Pattern</a>
          </li>
        
          <li>
            <a href="/2017/06/01/Memento-Pattern/">Memento Pattern</a>
          </li>
        
          <li>
            <a href="/2017/06/01/Iterator-Pattern/">Iterator Pattern</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 14px;">Java</a> <a href="/tags/Linux/" style="font-size: 16px;">Linux</a> <a href="/tags/R语言/" style="font-size: 18px;">R语言</a> <a href="/tags/工具/" style="font-size: 14px;">工具</a> <a href="/tags/杂谈/" style="font-size: 12px;">杂谈</a> <a href="/tags/设计模式/" style="font-size: 20px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul>
    </div>
  </div>


  
    
    <div class="widget-wrap">
        <h3 class="widget-title">友情链接</h3>
        <ul class="widget">
        
            <li class='link'><a href='https://github.com/RigeI'>GitHub</a></li>
        
            <li class='link'><a href='http://blog.csdn.net/nierunjie'>CSDN</a></li>
        
        </ul>
    </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Rigel<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof jQuery == 'undefined') {
    document.write(unescape("%3Cscript src='/js/jquery-2.0.3.min.js' type='text/javascript'%3E%3C/script%3E"));
}
// ]]>
</script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>